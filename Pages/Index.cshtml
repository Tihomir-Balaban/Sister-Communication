@page
@model Sister_Communication.Pages.IndexModel

<h1>Sister Communication</h1>

<!-- FORM 1: Google Search -->
<form method="post" asp-page-handler="Search">
    <label>Google search term</label><br />
    <input asp-for="SearchTerm" />
    <span asp-validation-for="SearchTerm"></span>
    <button type="submit">Search Google</button>
</form>

<hr />

<!-- FORM 2: SQL LIKE filter -->
<form method="post" asp-page-handler="DbFilter">
    <label>Filter URLs in DB (SQL LIKE)</label><br />
    <input asp-for="DbFilterTerm" />

    <!-- Persist which query we're filtering -->
    <input type="hidden" asp-for="CurrentQuery" />

    <span asp-validation-for="DbFilterTerm"></span>
    <button type="submit">Filter (SQL LIKE)</button>
</form>

<hr />

@if (Model.Results.Any())
{
    <table>
        <thead>
        <tr>
            <th>#</th>
            <th>Title</th>
            <th>URL</th>
            <th>DisplayLink</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var r in Model.Results)
        {
            <tr>
                <td>@r.Position</td>
                <td>@r.Title</td>
                <td><a href="@r.Url" target="_blank">@r.Url</a></td>
                <td>@r.DisplayLink</td>
            </tr>
        }
        </tbody>
    </table>
}